<csr:rule name="custom.rg.EnqueRule" match="custom:rg:enque" textonly>
	
	<csr:class super="dt.common.page.Rule" />
	
	<csr:description>...</csr:description>
	
	<csr:action>
		
		<script language="cache" runat="compiler">
			do ##this.RenderDTStartTag()
		</script>
		
		<csr:section name="HEAD">
			
			<script language="cache" runat="server">
				
				new foo, temp
				
				set foo = $zstrip($translate(##'..InnerText()'##, $char(9, 10, 13)), "<>W") // Trim leading/trailing spaces; remove horizontal tabs, line feeds and carriage returns.
				
				set temp = $System.Encryption.Base64Encode(foo)
				
				if ( ' $data(x)) {
					
					new x
					
					set x = $listbuild(temp)
					
					if (##'..IsDefined("uglify")'##) {
						
						write foo
						
					} else {
						
						write ##'..InnerText()'##
						
					}
					
				} else {
					
					if ( ' $listfind(x, temp)) {
						
						set x = x _ $listbuild(temp)
						
						if (##'..IsDefined("uglify")'##) {
							
							write foo
							
						} else {
							
							write ##'..InnerText()'##
							
						}
						
					}
					
				}
				
				kill foo, temp
				
			</script>
			
		</csr:section>
		
		<csr:section name="POSTHTML">
			
			<script language="cache" runat="server">
				
				kill:($data(x)) x // Needed?
				
			</script>
			
		</csr:section>
		
		<script language="cache" runat="compiler">
			do ##this.RenderDTEndTag()
		</script>
		
	</csr:action>
	
</csr:rule>

<csr:rule name="custom.rg.EnqueBodyRule" match="custom:rg:enque:body" textonly>
	
	<csr:class super="dt.common.page.Rule" />
	
	<csr:description>...</csr:description>
	
	<csr:action>
		
		<script language="cache" runat="compiler">
			do ##this.RenderDTStartTag()
		</script>
		
		<csr:section name="BODY" block="2">
			
			<script language="cache" runat="server">
				
				set foo = $zstrip($translate(##'..InnerText()'##, $char(9, 10, 13)), "<>W") // Trim leading/trailing spaces; remove horizontal tabs, line feeds and carriage returns.
				
				set temp = $System.Encryption.Base64Encode(foo)
				
				if ( ' $data(x)) {
					
					new x
					
					set x = $listbuild(temp)
					
					if (##'..IsDefined("uglify")'##) {
						
						write foo
						
					} else {
						
						write ##'..InnerText()'##
						
					}
					
				} else {
					
					if ( ' $listfind(x, temp)) {
						
						set x = x _ $listbuild(temp)
						
						if (##'..IsDefined("uglify")'##) {
							
							write foo
							
						} else {
							
							write ##'..InnerText()'##
							
						}
						
					}
					
				}
				
				kill foo, temp
				
			</script>
			
		</csr:section>
		
		<csr:section name="POSTHTML">
			
			<script language="cache" runat="server">
				
				kill:($data(x)) x // Needed?
				
			</script>
			
		</csr:section>
		
		<script language="cache" runat="compiler">
			do ##this.RenderDTEndTag()
		</script>
		
	</csr:action>
	
</csr:rule>
